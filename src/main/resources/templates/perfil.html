<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="UTF-8" />
	<title>Inicio</title>
	<!-- Compiled and minified CSS -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
	<header th:replace="layout/navbar :: header"></header>

	<div class="container">
		<div class="row">
			<hr />
			<div class="col s12" style="margin-top: 3%;">
				<div class="user-view">
					<div class="background col s4 center">
						<a href="#user"><img src="#" th:src="@{/images/contactos.png}" width="200" class="circle"></a>
					</div>
					<div class="background col s8">
						<h3><span class="blue-text name" th:text="${usuario.nombre} + ' ' + ${usuario.apellido}"></span>
						</h3>
						<h6 style="font-weight: bold;">Teléfono: <span th:text="${usuario.telefono}"
								style="font-weight: normal;"></span></h6>
						<h6 style="font-weight: bold;">Correo: <span th:text="${usuario.email}"
								style="font-weight: normal;"></span></h6>
						<div class="secondary-content">
							<form th:action="@{/usuario/perfil/{id}/eliminar(id=${usuario.idUsuario})}" method="POST">
								<a class="waves-effect waves-light btn modal-trigger" href="#modal1"><i
										class="material-icons small">edit</i></a>
								<button class="btn red" onclick="eliminarPerfil(this)" type="submit"><i
										class="material-icons left">delete</i>Eliminar Cuenta</button>

								<div id="modal1" class="modal">
									<div class="modal-content">
										<h4 class="blue-text center">Editar Perfil</h4>
										<div class="row">
											<form class="col s12">
												<div class="row">
													<div class="input-field col s6">
														<input id="nombre" th:value="${usuario.nombre}" type="text"
															class="validate">
														<label for="nombre">Nombre</label>
													</div>
													<div class="input-field col s6">
														<input id="apellido" th:value="${usuario.apellido}" type="text"
															class="validate">
														<label for="apellido">Apellido</label>
													</div>
													<div class="input-field col s6">
														<input id="nombre" th:value="${usuario.telefono}" type="text"
															class="validate">
														<label for="nombre">Teléfono</label>
													</div>
													<div class="input-field col s6">
														<input id="apellido" th:value="${usuario.email}" type="email"
															class="validate">
														<label for="apellido">Email</label>
													</div>
												</div>
												<div class="row">
													<div class="input-field col s12">
														<textarea id="descripcion"
															class="materialize-textarea"></textarea>
														<label for="descripcion">Descripción</label>
													</div>
												</div>
											</form>
										</div>

										<div class="modal-footer">
											<a href="#!" onclick="M.toast({html: 'Pedido Cancelado'})"
												class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
											<a class="btn" th:href="@{/usuario/perfil/{id}/editar}"><i
													class="material-icons small">edit</i></a>
										</div>
									</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<hr />
	<div class="input-field">
		<textarea id="myTextarea" class="materialize-textarea"></textarea>
		<label for="myTextarea">Escribe algo...</label>
	</div>

	<footer th:replace="layout/footer :: footer"></footer>

	<!-- Compiled and minified JavaScript -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
	<script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
	<script>
		function eliminarPerfil(elemento) {
			Swal.fire({
				title: '¿Estas seguro de eliminar el perfil?',
				text: "No podrás revertir esta acción!",
				icon: 'warning',
				showCancelButton: true,
				confirmButtonColor: '#3085d6',
				cancelButtonColor: '#d33',
				confirmButtonText: 'Si, eliminalo!'
			}).then((result) => {
				if (result.isConfirmed) {
					Swal.fire(
						'Eliminado!',
						'Tu contacto ha sido eliminado.',
						'success'
					).then((result) => {
						elemento.nextElementSibling.submit();
					})
				}
			})
		}

		document.addEventListener('DOMContentLoaded', function () {
			var elems = document.querySelectorAll('.modal');
			var instances = M.Modal.init(elems);

			var modalTriggers = document.querySelectorAll('.modal-trigger');
			modalTriggers.forEach(function (trigger) {
				trigger.addEventListener('click', function () {
					var titulo = trigger.getAttribute('data-cliente');
					var descripcion = trigger.getAttribute('data-descripcion');
					document.getElementById('cliente').innerText = titulo;
					document.getElementById('descripcion-modal').innerText = descripcion;
				});
			});
		});
	</script>
</body>

</html>